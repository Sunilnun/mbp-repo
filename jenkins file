pipeline{
    agent any
    environment{
        DEPLOY_TO = 'production'
    }
    stages{
        stage('this stage is defining for the allOf when condition'){
            when{
                allOf{

                 environment name: 'DEPLOY_TO', value: 'production'
                 expression { BRANCH_NAME ==~ /'(docker|kubernetes)'}

                }
                
            }
            
            steps{
                echo 'all the conditions of the when met successfully and depoying to prod'
            }
        }
    }
}
